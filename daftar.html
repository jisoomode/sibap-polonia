<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Pendaftaran BAP | SIBAP Polonia</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
  font-family:Arial,Helvetica,sans-serif;
  background:#eef2f7;
  margin:0
}
.header{
  background:linear-gradient(135deg,#0b5ed7,#084298);
  color:#fff;
  padding:25px;
  text-align:center
}
.header h1{margin:0;font-size:22px}
.header p{margin-top:6px;font-size:14px;opacity:.9}

.container{
  max-width:820px;
  margin:30px auto;
  background:#fff;
  padding:30px;
  border-radius:10px;
  box-shadow:0 4px 12px rgba(0,0,0,.1)
}
.section-title{
  font-size:18px;
  margin-bottom:20px;
  color:#0b5ed7
}
label{font-weight:bold;margin-top:15px;display:block}
input,select{
  width:100%;
  padding:10px;
  margin-top:6px;
  border:1px solid #ccc;
  border-radius:6px
}
.file-box{
  background:#f8f9fa;
  padding:15px;
  border-radius:8px;
  margin-top:15px;
  border-left:5px solid #0b5ed7
}
.badge{
  display:inline-block;
  background:#ffc107;
  color:#000;
  padding:5px 12px;
  border-radius:20px;
  font-size:13px;
  font-weight:bold
}
.notice{
  background:#e7f1ff;
  padding:15px;
  border-radius:8px;
  margin-top:25px;
  font-size:14px
}
button{
  margin-top:30px;
  padding:14px;
  width:100%;
  background:#0b5ed7;
  color:#fff;
  border:none;
  border-radius:8px;
  font-size:16px;
  cursor:pointer
}
button:hover{background:#084298}
.footer{
  text-align:center;
  font-size:13px;
  color:#666;
  margin:25px 0
}
</style>
</head>

<body>

<div class="header">
  <h1>KANTOR IMIGRASI KELAS I TPI POLONIA</h1>
  <p>Sistem Informasi Booking BAP (SIBAP)</p>
</div>

<div class="container">
  <div class="section-title">Form Pendaftaran BAP</div>

<form id="formDaftar">

<label>Tanggal BAP</label>
<input type="text" id="tanggalBAP" readonly>

<label>Nama Lengkap</label>
<input type="text" required>

<label>NIK</label>
<input type="text" required>

<label>Nomor HP Aktif</label>
<input type="text" required>

<label>Jenis Permohonan</label>
<select id="jenis" required>
  <option value="">-- Pilih --</option>
  <option value="hilang">Paspor Hilang</option>
  <option value="rusak">Paspor Rusak</option>
  <option value="perubahan">Perubahan Data</option>
</select>

<div id="berkas"></div>

<div class="notice">
  <b>Keputusan Pemeriksaan:</b><br><br>
  Pemeriksaan dan keputusan akhir tetap dilakukan di 
  <span class="badge">Loket 3</span>.<br><br>
  Apabila permohonan <b>disetujui</b>, pemohon <b>wajib hadir langsung</b> 
  ke Kantor Imigrasi Kelas I TPI Polonia dengan membawa seluruh 
  kelengkapan dokumen asli dan salinan.<br><br>
  Selanjutnya pemohon akan mendapatkan 
  <b>Tanda Terima Kedatangan BAP dari Loket 3</b>.
</div>

<button type="submit">Kirim Pendaftaran</button>
</form>
</div>

<div class="footer">
Â© Kantor Imigrasi Kelas I TPI Polonia
</div>

<script>
// ===== AMBIL TANGGAL DARI JADWAL =====
const params = new URLSearchParams(window.location.search);
let tanggal = params.get("tanggal");

if(!tanggal){
  document.body.innerHTML="<h2 style='text-align:center'>Tanggal tidak valid</h2>";
  throw new Error("Tanggal kosong");
}

tanggal = decodeURIComponent(tanggal);
document.getElementById("tanggalBAP").value = tanggal;

// ===== ATUR BERKAS =====
const berkasDiv = document.getElementById("berkas");
const jenis = document.getElementById("jenis");

jenis.addEventListener("change",()=>{
  berkasDiv.innerHTML="";
  let html="";

  if(jenis.value==="hilang"){
    html=`
    <div class="file-box">
      <b>Dokumen Wajib</b><br><br>
      <input type="file" required> KTP<br><br>
      <input type="file" required> KK<br><br>
      <input type="file" required> Akte Lahir<br><br>
      <input type="file" required> Surat Keterangan Kehilangan dari Kepolisian<br><br>
      <input type="file" required> Halaman Data Paspor
    </div>
    <div class="file-box">
      <b>Berkas Pendukung</b><br><br>
      <input type="file"> Ijazah / Akte Nikah
    </div>`;
  }

  if(jenis.value==="rusak"){
    html=`
    <div class="file-box">
      <b>Dokumen Wajib</b><br><br>
      <input type="file" required> KTP<br><br>
      <input type="file" required> KK<br><br>
      <input type="file" required> Akte Lahir<br><br>
      <input type="file" required> Halaman Data Paspor
    </div>
    <div class="file-box">
      <b>Berkas Pendukung</b><br><br>
      <input type="file"> Ijazah / Akte Nikah
    </div>`;
  }

  if(jenis.value==="perubahan"){
    html=`
    <div class="file-box">
      <b>Dokumen Wajib</b><br><br>
      <input type="file" required> KTP<br><br>
      <input type="file" required> KK<br><br>
      <input type="file" required> Akte Lahir<br><br>
      <input type="file" required> Surat Penetapan Pengadilan
    </div>
    <div class="file-box">
      <b>Berkas Pendukung</b><br><br>
      <input type="file"> Ijazah / Akte Nikah
    </div>`;
  }

  berkasDiv.innerHTML=html;
});

// ===== SIMPAN KE ADMIN =====
document.getElementById("formDaftar").addEventListener("submit",()=>{
  let data = JSON.parse(localStorage.getItem("pendaftaran") || "[]");
  data.push({
    tanggal:tanggal,
    jenis:jenis.value,
    waktu:new Date().toLocaleString()
  });
  localStorage.setItem("pendaftaran",JSON.stringify(data));
  alert("Pendaftaran berhasil dikirim");
});
</script>
</body>
</html>
