<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Pendaftaran BAP | SIBAP Polonia</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#eef3f8;
}

header{
  background:#0c3b5f;
  color:#fff;
  padding:28px;
  text-align:center;
}

header h1{
  margin:0;
  font-size:22px;
}

header p{
  margin-top:6px;
  font-size:14px;
  opacity:.9;
}

.container{
  max-width:850px;
  margin:35px auto;
  background:#fff;
  padding:35px;
  border-radius:12px;
  box-shadow:0 4px 14px rgba(0,0,0,.12);
}

.section-title{
  font-size:18px;
  color:#0c3b5f;
  margin-bottom:20px;
  font-weight:bold;
}

label{
  display:block;
  margin-top:16px;
  font-weight:bold;
}

input, select{
  width:100%;
  padding:11px;
  margin-top:7px;
  border:1px solid #ccc;
  border-radius:6px;
  font-size:14px;
}

.file-box{
  background:#f4f7fb;
  padding:18px;
  border-radius:10px;
  margin-top:18px;
  border-left:6px solid #0c3b5f;
}

.file-box h4{
  margin-top:0;
  color:#0c3b5f;
}

.notice{
  background:#eef5ff;
  padding:18px;
  border-radius:10px;
  margin-top:25px;
  font-size:14px;
  line-height:1.6;
}

.badge{
  display:inline-block;
  background:#ffc107;
  color:#000;
  padding:4px 10px;
  border-radius:20px;
  font-size:13px;
  font-weight:bold;
}

button{
  margin-top:30px;
  width:100%;
  padding:14px;
  background:#0c3b5f;
  color:#fff;
  border:none;
  border-radius:8px;
  font-size:16px;
  cursor:pointer;
}

button:hover{
  background:#092f4d;
}

.footer{
  text-align:center;
  margin:25px 0;
  font-size:13px;
  color:#666;
}
</style>
</head>

<body>

<header>
  <h1>KANTOR IMIGRASI KELAS I TPI POLONIA</h1>
  <p>Sistem Informasi Booking BAP (SIBAP)</p>
</header>

<div class="container">
<div class="section-title">Form Pendaftaran BAP</div>

<form id="formDaftar">

<label>Tanggal BAP</label>
<input type="text" id="tanggalBAP" readonly>

<label>Nama Lengkap</label>
<input type="text" required>

<label>NIK</label>
<input type="text" maxlength="16" required>

<label>Nomor HP (WhatsApp Aktif)</label>
<input type="text" required>

<label>Pekerjaan</label>
<input type="text" required>

<label>Tujuan Penggunaan Paspor</label>
<select required>
  <option value="">-- Pilih Tujuan --</option>
  <option>Wisata</option>
  <option>Pekerjaan</option>
  <option>Pendidikan</option>
  <option>Ibadah</option>
  <option>Lainnya</option>
</select>

<label>Jenis Permohonan</label>
<select id="jenis" required>
  <option value="">-- Pilih --</option>
  <option value="hilang">Paspor Hilang</option>
  <option value="rusak">Paspor Rusak</option>
  <option value="perubahan">Perubahan Data</option>
</select>

<div id="berkas"></div>

<div class="notice">
<b>Informasi Penting:</b><br><br>
Pemeriksaan dan keputusan akhir dilakukan di
<span class="badge">Loket 3</span>.<br><br>
Apabila permohonan <b>disetujui</b>, pemohon <b>wajib datang langsung</b>
ke Kantor Imigrasi Kelas I TPI Polonia dengan membawa seluruh dokumen asli
dan salinannya untuk mendapatkan
<b>Tanda Terima Kedatangan BAP</b> dari Loket 3.
</div>

<button type="submit">Kirim Pendaftaran</button>
</form>
</div>

<div class="footer">
Â© Kantor Imigrasi Kelas I TPI Polonia
</div>

<script>
// === TANGGAL DARI JADWAL ===
const params = new URLSearchParams(window.location.search);
let tanggal = params.get("tanggal");

if(!tanggal){
  document.body.innerHTML="<h2 style='text-align:center'>Tanggal tidak valid</h2>";
  throw new Error("Tanggal kosong");
}

document.getElementById("tanggalBAP").value = decodeURIComponent(tanggal);

// === BERKAS ===
const jenis = document.getElementById("jenis");
const berkas = document.getElementById("berkas");

jenis.addEventListener("change",()=>{
  let html="";

  if(jenis.value==="hilang"){
    html=`
    <div class="file-box">
      <h4>Dokumen Wajib</h4>
      KTP <input type="file" required><br><br>
      KK <input type="file" required><br><br>
      Akte Kelahiran <input type="file" required><br><br>
      Surat Kehilangan dari Kepolisian <input type="file" required><br><br>
      Halaman Data Paspor <input type="file" required>
    </div>
    <div class="file-box">
      <h4>Berkas Pendukung</h4>
      Ijazah / Akte Nikah <input type="file">
    </div>`;
  }

  if(jenis.value==="rusak"){
    html=`
    <div class="file-box">
      <h4>Dokumen Wajib</h4>
      KTP <input type="file" required><br><br>
      KK <input type="file" required><br><br>
      Akte Kelahiran <input type="file" required><br><br>
      Halaman Data Paspor <input type="file" required>
    </div>
    <div class="file-box">
      <h4>Berkas Pendukung</h4>
      Ijazah / Akte Nikah <input type="file">
    </div>`;
  }

  if(jenis.value==="perubahan"){
    html=`
    <div class="file-box">
      <h4>Dokumen Wajib</h4>
      KTP <input type="file" required><br><br>
      KK <input type="file" required><br><br>
      Akte Kelahiran <input type="file" required><br><br>
      Surat Penetapan Pengadilan <input type="file" required>
    </div>
    <div class="file-box">
      <h4>Berkas Pendukung</h4>
      Ijazah / Akte Nikah <input type="file">
    </div>`;
  }

  berkas.innerHTML = html;
});

// === SIMPAN KE ADMIN ===
document.getElementById("formDaftar").addEventListener("submit",()=>{
  let data = JSON.parse(localStorage.getItem("pendaftaran") || "[]");
  data.push({tanggal,jenis:jenis.value,waktu:new Date().toLocaleString()});
  localStorage.setItem("pendaftaran",JSON.stringify(data));
  alert("Pendaftaran berhasil dikirim");
});
</script>

</body>
</html>

